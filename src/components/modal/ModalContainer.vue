<script setup lang="ts">
import ModalDialog from './ModalDialog.vue'
import { isCommandPanelOpen } from '~/composables/dialog'

const isMac = useIsMac()

useEventListener('keydown', (e: KeyboardEvent) => {
  if ((e.key === 'k' || e.key === 'Ð»') && (isMac.value ? e.metaKey : e.ctrlKey)) {
    e.preventDefault()
    openCommandPanel(e.shiftKey)
  }
  if ((e.key === '/' || e.key === ',') && (isMac.value ? e.metaKey : e.ctrlKey)) {
    e.preventDefault()
    openCommandPanel(true)
  }
})
</script>

<template>
  <div>
    <ModalDialog v-model="isCommandPanelOpen" max-w-fit flex>
      <CommandPanel @close="closeCommandPanel()" />
    </ModalDialog>
  </div>
</template>
